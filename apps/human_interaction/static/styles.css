:root { --card-height: 180px; --card-width: 130px; }
.card-container { perspective: 1000px; position: relative; }
.card {
    width: var(--card-width); height: var(--card-height);
    background: #1a1a1a; color: white; border-radius: 10px; border: 2px solid #555;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    font-family: 'Segoe UI', sans-serif; transition: transform 0.1s ease-out;
    position: relative; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.4);
}
.card-content { z-index: 2; text-shadow: 0 0 5px black; }
.card::after {
    content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
    background: linear-gradient(110deg, rgba(255,255,255,0) 40%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 60%);
    animation: shine 7s infinite linear; z-index: 1; opacity: 0.3;
}
@keyframes shine { 0% { transform: translateX(-60%) translateY(-10%) rotate(20deg); } 100% { transform: translateX(60%) translateY(10%) rotate(20deg); } }
.card.dead { filter: grayscale(100%); }
.card.dead::before {
    content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(to top right, rgba(255,255,255,0) 0%, rgba(255,255,255,0) 49.8%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0) 50.2%),
                linear-gradient(to top left, rgba(255,255,255,0) 0%, rgba(255,255,255,0) 49.8%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0) 50.2%);
    background-size: 100% 100%; transform: rotate(15deg) scale(1.2); z-index: 3; opacity: 0.6;
}
.speech-bubble {
    position: absolute; bottom: 80%; left: 90%;
    min-width: 150px; max-width: 250px;
    background-color: #fff; color: #000; border-radius: 8px; padding: 10px;
    font-size: 0.9em; box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s;
    z-index: 10; white-space: pre-wrap;
}
.speech-bubble.visible { opacity: 1; visibility: visible; }
.speech-bubble::after {
    content: ''; position: absolute;
    bottom: -10px; left: 20px;
    border-width: 10px 10px 0; border-style: solid;
    border-color: #fff transparent transparent transparent;
}
.night-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(6, 0, 15, 0.7); z-index: 20;
    display: none; opacity: 0; transition: opacity 1.5s;
}
.night-overlay.visible { display: block; opacity: 1; }
.fog {
    position: absolute; width: 200vw; height: 100vh;
    background: url(https://i.imgur.com/74gbhS9.png) repeat-x;
    background-size: contain; background-position: center;
    animation: fog-move 60s linear infinite;
}
.fog.fog-1 { opacity: 0.1; animation-duration: 120s; }
.fog.fog-2 { opacity: 0.1; animation-duration: 80s; }
@keyframes fog-move { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
.day-announcement {
    position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
    font-size: 10em; color: white; font-weight: bold; text-shadow: 0 0 20px black;
    z-index: 30; opacity: 0; pointer-events: none;
}
.day-announcement.animate { animation: zoom-fade 2.5s ease-out; }
@keyframes zoom-fade {
    0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
    50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
}